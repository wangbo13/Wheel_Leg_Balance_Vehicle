# MATLAB算法部分
## 介绍
### 算法部分
>需要修改的车车参数部分在`leg_func_calc.m`、`leg_geometry.m`和`sys_calc.m`文件中，其他文件均为导出文件。
本部分为平衡车车主要算法的代码，用MATLAB的coder工具箱导出成C文件后进行使用。
- `leg_func_calc.m`：进行腿部解算和 VMC 映射计算<!--，包含上述步骤1-2-->，导出以下三个M函数：
    - `LegPos.m`：可由关节电机角度求得腿部姿态
    - `LegSpd.m`：可由关节电机角度速度求得腿部运动速度
    - `LegConv.m`：可由虚拟腿目标扭矩和推力求得电机所需输出的力矩
- `sys_calc.m`：求得系统状态方程，求得反馈矩阵<!--，包含上述步骤3-4-->，导出下述M函数：
    - `LQR_K.m`：代入腿长 L0 后返回该腿长对应的反馈矩阵 K
- `leg_geometry.m`：腿部五连杆的几何学逆向解算。
  - `JointPos`：代入$L_0$和$\phi_0$的值求解关节电机位置。
### 仿真部分
> 进行仿真前需要调整物理模型与自己的车车相匹配。
- `leg_sim.slx`：腿部VMC解算仿真。
- `leg_sim_geo.slx`：腿部几何学解算仿真。
- `sys_sim.slx`：采用VMC解算的平衡车整体系统仿真（单腿）
- `sys_sim_geo.slx`：采用几何学解算的平衡车整体系统仿真（单腿）